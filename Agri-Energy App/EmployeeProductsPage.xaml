<Page x:Class="Agri_Energy_App.EmployeeProductsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="EmployeeProductsPage">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="All Products" FontSize="20" FontWeight="Bold" Margin="10"/>

        <!-- Filter Controls -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="10">
            <ComboBox x:Name="cmbFarmers" Width="250" Margin="5"
                      DisplayMemberPath="FullName" SelectedValuePath="Id"
                      SelectionChanged="FilterProducts"/>

            <ComboBox x:Name="cmbCategories"
                      Width="150"
                      Margin="5"
                      ItemsSource="{Binding CategoryOptions}"
                      SelectedItem="{Binding SelectedCategory, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                      SelectionChanged="FilterProducts"/>

            <DatePicker x:Name="dpFromDate" Width="120" Margin="5" SelectedDateChanged="FilterProducts"/>
            <TextBlock Text="to" VerticalAlignment="Center" Margin="5,0"/>
            <DatePicker x:Name="dpToDate" Width="120" Margin="5" SelectedDateChanged="FilterProducts"/>

            <Button Content="Clear Filters" Margin="5" Click="ClearFilters_Click"/>
        </StackPanel>

        <!-- Products List -->
        <DataGrid x:Name="productsGrid" Grid.Row="2" Margin="10" AutoGenerateColumns="False"
                  CanUserAddRows="False" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Product" Binding="{Binding Name}" Width="150"/>
                <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="100"/>
                <DataGridTextColumn Header="Production Date"
                                     Binding="{Binding ProductionDate, StringFormat=yyyy-MM-dd}" Width="120"/>
                <DataGridTextColumn Header="Farmer" Width="200">
                    <DataGridTextColumn.Binding>
                        <MultiBinding StringFormat="{}{0} {1}">
                            <Binding Path="Farmer.FirstName"/>
                            <Binding Path="Farmer.LastName"/>
                        </MultiBinding>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>
